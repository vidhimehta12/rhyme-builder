<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Rhyme Builder</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'twinkle': 'twinkle 2s ease-in-out infinite',
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        twinkle: {
                            '0%, 100%': { opacity: '0.3', transform: 'scale(0.8)' },
                            '50%': { opacity: '1', transform: 'scale(1.2)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                    },
                },
            },
        }
    </script>
    <style>
        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp {
            0% { opacity: 0; transform: translateY(30px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        .animate-slide-up { animation: slideUp 0.5s ease-out; }
        .animate-twinkle { animation: twinkle 2s ease-in-out infinite; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        
        .galaxy-bg {
            background: linear-gradient(180deg, 
                #000000 0%,      /* Black at top */
                #1a0033 25%,     /* Very dark purple */
                #4a0e4e 40%,     /* Dark purple */
                #8e44ad 55%,     /* Purple */
                #e74c3c 65%,     /* Purple-pink */
                #9b59b6 75%,     /* Purple */
                #3f51b5 85%,     /* Purple-blue */
                #2196f3 100%     /* Blue at bottom */
            );
            position: relative;
            overflow: hidden;
            min-height: 100vh;
        }
        
        .galaxy-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(1px 1px at 20px 30px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 40px 70px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(255,255,255,0.9), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.5), transparent),
                radial-gradient(1px 1px at 160px 30px, rgba(255,255,255,0.7), transparent),
                radial-gradient(1px 1px at 200px 120px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 250px 60px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 300px 100px, rgba(255,255,255,0.4), transparent),
                radial-gradient(1px 1px at 350px 40px, rgba(255,255,255,0.9), transparent),
                radial-gradient(1px 1px at 400px 140px, rgba(255,255,255,0.7), transparent),
                radial-gradient(1px 1px at 450px 80px, rgba(255,255,255,0.5), transparent),
                radial-gradient(1px 1px at 500px 20px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 550px 160px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 50px 150px, rgba(255,255,255,0.7), transparent),
                radial-gradient(1px 1px at 100px 200px, rgba(255,255,255,0.5), transparent),
                radial-gradient(1px 1px at 150px 250px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 320px 200px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 380px 220px, rgba(255,255,255,0.4), transparent),
                radial-gradient(1px 1px at 420px 180px, rgba(255,255,255,0.7), transparent),
                radial-gradient(1px 1px at 480px 240px, rgba(255,255,255,0.9), transparent);
            background-repeat: repeat;
            background-size: 600px 300px;
            animation: twinkle 6s ease-in-out infinite;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple icons using Unicode/emojis instead of lucide-react
        const Sparkles = ({ className }) => <span className={className}>✨</span>;
        const Music = ({ className }) => <span className={className}>🎵</span>;
        const RotateCcw = ({ className }) => <span className={className}>🔄</span>;
        const Volume2 = ({ className }) => <span className={className}>🔊</span>;
        const VolumeX = ({ className }) => <span className={className}>🔇</span>;
        const Loader = ({ className }) => <span className={`${className} animate-spin`}>⚪</span>;

        const RhymeBuilder = () => {
            const [selectedEmojis, setSelectedEmojis] = useState([]);
            const [currentRhyme, setCurrentRhyme] = useState('');
            const [isAnimating, setIsAnimating] = useState(false);
            const [activeCategory, setActiveCategory] = useState('animals');
            const [isSinging, setIsSinging] = useState(false);
            const [currentWord, setCurrentWord] = useState(-1);
            const [isGeneratingRhyme, setIsGeneratingRhyme] = useState(false);
            const [showRhyme, setShowRhyme] = useState(false);
            const [isPlaying, setIsPlaying] = useState(false);
            const [speechSynthesis, setSpeechSynthesis] = useState(null);

            // Initialize speech synthesis
            useEffect(() => {
                if ('speechSynthesis' in window) {
                    setSpeechSynthesis(window.speechSynthesis);
                }
            }, []);

            // Limited emoji library with 10 most popular emojis per category
            const emojiLibrary = {
                animals: ['🐱', '🐶', '🐭', '🐹', '🐰', '🦊', '🐻', '🐼', '🐸', '🐵'],
                food: ['🍎', '🍌', '🍓', '🍕', '🍔', '🍟', '🍪', '🍰', '🍦', '🍭'],
                toys: ['🧸', '🎈', '🎁', '⚽', '🎮', '🚗', '🎨', '🎵', '🎪', '🎯'],
                nature: ['🌸', '🌻', '🌈', '⭐', '🌙', '☀️', '🌊', '🌳', '🦋', '🌺'],
                vehicles: ['🚗', '🚁', '🚀', '✈️', '🚢', '🚲', '🚌', '🚒', '🚑', '🚓'],
                space: ['🚀', '⭐', '🌙', '☀️', '🪐', '🌌', '👽', '🛸', '🌍', '🌟']
            };



            const categories = [
                { id: 'animals', name: 'Animals', icon: '🐾' },
                { id: 'food', name: 'Food', icon: '🍎' },
                { id: 'toys', name: 'Toys', icon: '🧸' },
                { id: 'nature', name: 'Nature', icon: '🌸' },
                { id: 'vehicles', name: 'Vehicles', icon: '🚗' },
                { id: 'space', name: 'Space', icon: '🚀' }
            ];

            // Character names for emojis
            const emojiCharacters = {
                // Animals
                '🐱': 'Whiskers the Cat', '🐶': 'Buddy the Dog', '🐭': 'Squeaky the Mouse',
                '🐹': 'Nibbles the Hamster', '🐰': 'Hopscotch the Bunny', '🦊': 'Clever the Fox',
                '🐻': 'Huggy the Bear', '🐼': 'Bamboo the Panda', '🐸': 'Ribbit the Frog',
                '🐵': 'Giggles the Monkey',
                // Food
                '🍎': 'Crunchy the Apple', '🍌': 'Bendy the Banana', '🍓': 'Sweet the Strawberry',
                '🍕': 'Cheesy the Pizza', '🍔': 'Burger the Burger', '🍟': 'Crispy the Fries',
                '🍪': 'Cookie the Cookie', '🍰': 'Cakey the Cake', '🍦': 'Chilly the Ice Cream',
                '🍭': 'Lolly the Lollipop',
                // Toys
                '🧸': 'Teddy the Bear', '🎈': 'Floaty the Balloon', '🎁': 'Surprise the Present',
                '⚽': 'Bouncy the Ball', '🎮': 'Gamer the Controller', '🚗': 'Speedy the Car',
                '🎨': 'Artsy the Palette', '🎵': 'Melody the Note', '🎪': 'Circus the Tent',
                '🎯': 'Bullseye the Target',
                // Nature
                '🌸': 'Blossom the Flower', '🌻': 'Sunny the Sunflower', '🌈': 'Rainbow the Arc',
                '⭐': 'Twinkle the Star', '🌙': 'Luna the Moon', '☀️': 'Sunny the Sun',
                '🌊': 'Wavey the Ocean', '🌳': 'Tall the Tree', '🦋': 'Flutter the Butterfly',
                '🌺': 'Pretty the Hibiscus',
                // Vehicles
                '🚁': 'Whirly the Helicopter', '🚀': 'Rocket the Ship', '✈️': 'Jetty the Plane',
                '🚢': 'Captain the Ship', '🚲': 'Pedal the Bike', '🚌': 'Buster the Bus',
                '🚒': 'Hero the Fire Truck', '🚑': 'Helper the Ambulance', '🚓': 'Officer the Police Car',
                // Space
                '🪐': 'Ringy the Planet', '🌌': 'Galaxy the Space', '👽': 'Zorp the Alien',
                '🛸': 'UFO the Saucer', '🌍': 'Terra the Earth', '🌟': 'Sparkly the Star'
            };

            const generateRhyme = () => {
                if (selectedEmojis.length === 0) return "Choose some emojis to make a rhyme! 🎵";
                
                // Create character list with names, ensuring all emojis are represented
                const characters = selectedEmojis.map(emoji => {
                    const name = emojiCharacters[emoji] || `${emoji} Friend`;
                    return `${emoji} ${name}`;
                });
                
                // Generate rhyme based on number of characters
                if (characters.length === 1) {
                    const templates = [
                        `Meet {char1}!\n*wave hello* They love to play! 🎵`,
                        `{char1} says hello,\n*wiggle fingers* Ready to go! ✨`,
                        `Look, it's {char1}!\n*point and smile* What fun! 🌟`
                    ];
                    const template = templates[Math.floor(Math.random() * templates.length)];
                    return template.replace('{char1}', characters[0]);
                }
                
                if (characters.length === 2) {
                    const templates = [
                        `{char1} and {char2},\nBest friends forever, you see!\n*hold hands* Hip hooray! 💕`,
                        `Meet {char1},\nAnd {char2} too!\nThey love to play,\n*dance around* Just like you! 🎶`,
                        `{char1} says "Hello!"\n{char2} waves back, you know!\n*wave together* What a show! 🎭`
                    ];
                    const template = templates[Math.floor(Math.random() * templates.length)];
                    return template.replace('{char1}', characters[0]).replace('{char2}', characters[1]);
                }
                
                if (characters.length === 3) {
                    const templates = [
                        `Three friends came out to play:\n{char1}, {char2}, and {char3} today!\nThey sing and dance in every way,\n*jump three times* Hip hooray! 🎈`,
                        `In the garden you will find,\n{char1}, {char2}, and {char3} so kind!\nThey play together all the time,\n*make a circle* What a rhyme! 🌻`,
                        `{char1} started the fun,\n{char2} joined in on the run,\n{char3} made three,\n*spin around* Happy as can be! 🌟`
                    ];
                    const template = templates[Math.floor(Math.random() * templates.length)];
                    return template.replace('{char1}', characters[0]).replace('{char2}', characters[1]).replace('{char3}', characters[2]);
                }
                
                if (characters.length === 4) {
                    const templates = [
                        `Four friends came out to play:\n{char1}, {char2}, {char3}, and {char4} today!\nThey sing and dance in every way,\nLaughing together all the day!\n*march in place* Hip hooray! 🎪`,
                        `{char1} said "Let's have fun!"\n{char2} said "Count me in, everyone!"\n{char3} and {char4} joined the game,\n*clap hands* Friends forever, that's their name! 👥`,
                        `Ring around the garden bright,\n{char1}, {char2}, what a sight!\n{char3} and {char4} dance with glee,\n*fall down* Happy friends, you and me! 🌈`
                    ];
                    const template = templates[Math.floor(Math.random() * templates.length)];
                    return template.replace('{char1}', characters[0]).replace('{char2}', characters[1])
                                  .replace('{char3}', characters[2]).replace('{char4}', characters[3]);
                }
                
                if (characters.length === 5) {
                    const templates = [
                        `Five special friends so bright:\n{char1}, {char2}, what a sight!\n{char3}, {char4}, and {char5} too,\nThey love to play games, just like you!\n*count on fingers* One, two, three, four, five!\n*jump up* They're all alive! 🎉`,
                        `{char1} started the parade,\n{char2} joined the fun they made,\n{char3}, {char4}, and {char5} came along,\n*march together* Singing their happy song!\nFive friends together, strong and true! 🎵`
                    ];
                    const template = templates[Math.floor(Math.random() * templates.length)];
                    return template.replace('{char1}', characters[0]).replace('{char2}', characters[1])
                                  .replace('{char3}', characters[2]).replace('{char4}', characters[3])
                                  .replace('{char5}', characters[4]);
                }
                
                // For 6 characters
                const template = `Six wonderful friends came out to play:\n{char1}, {char2}, and {char3} say "Hooray!"\n{char4}, {char5}, and {char6} join the fun,\nDancing and playing until day is done!\nTogether they laugh and together they sing,\n*dance in circle* Friends can do anything!\n*wave goodbye* What joy they bring! 🌟`;
                return template.replace('{char1}', characters[0]).replace('{char2}', characters[1])
                              .replace('{char3}', characters[2]).replace('{char4}', characters[3])
                              .replace('{char5}', characters[4]).replace('{char6}', characters[5]);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                const emoji = e.dataTransfer.getData('text/plain');
                if (emoji && selectedEmojis.length < 6) {  // Allow up to 6 emojis now
                    setSelectedEmojis([...selectedEmojis, emoji]);
                }
            };

            const handleDragOver = (e) => {
                e.preventDefault();
            };

            const handleDragStart = (e, emoji) => {
                e.dataTransfer.setData('text/plain', emoji);
            };

            const removeEmoji = (index) => {
                setSelectedEmojis(selectedEmojis.filter((_, i) => i !== index));
            };

            const handleGenerateRhyme = () => {
                if (selectedEmojis.length === 0) return;
                
                setIsGeneratingRhyme(true);
                setIsAnimating(true);
                setShowRhyme(false);
                
                // 3-second magical animation
                setTimeout(() => {
                    const rhyme = generateRhyme();
                    setCurrentRhyme(rhyme);
                    setIsAnimating(false);
                    setShowRhyme(true);
                    setIsGeneratingRhyme(false);
                }, 3000);
            };

            const clearAll = () => {
                setSelectedEmojis([]);
                setCurrentRhyme('');
                setShowRhyme(false);
                setIsAnimating(false);
                setIsGeneratingRhyme(false);
            };

            const playAudio = () => {
                if (!speechSynthesis || !currentRhyme) return;

                if (isPlaying) {
                    speechSynthesis.cancel();
                    setIsPlaying(false);
                    return;
                }

                // Clean the text for speech synthesis (remove asterisk actions and emojis)
                let textToSpeak = currentRhyme
                    .replace(/\*[^*]+\*/g, '') // Remove asterisk actions
                    .replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, '') // Remove emojis
                    .replace(/\s+/g, ' ') // Clean up extra spaces
                    .trim();

                const utterance = new SpeechSynthesisUtterance(textToSpeak);
                
                // Try to find the best child-friendly voice with sing-song quality
                const voices = speechSynthesis.getVoices();
                
                // Look for specific child/female voices that work well for singing
                const preferredVoices = voices.filter(voice => 
                    voice.name.toLowerCase().includes('samantha') ||
                    voice.name.toLowerCase().includes('victoria') ||
                    voice.name.toLowerCase().includes('karen') ||
                    voice.name.toLowerCase().includes('anna') ||
                    voice.name.toLowerCase().includes('female') ||
                    voice.name.toLowerCase().includes('woman') ||
                    (voice.lang.startsWith('en') && voice.name.toLowerCase().includes('premium'))
                );
                
                if (preferredVoices.length > 0) {
                    utterance.voice = preferredVoices[0];
                } else {
                    // Fallback to any female voice
                    const femaleVoice = voices.find(voice => 
                        voice.name.toLowerCase().includes('female') || 
                        voice.name.toLowerCase().includes('woman')
                    );
                    if (femaleVoice) {
                        utterance.voice = femaleVoice;
                    }
                }
                
                // Enhanced settings for sing-song delivery
                utterance.rate = 0.7;        // Slower for sing-song effect
                utterance.pitch = 1.3;       // Higher pitch for child-friendly
                utterance.volume = 1;
                
                // Add some musical variation by splitting into segments
                const sentences = textToSpeak.split(/[.!?]/);
                let currentSentence = 0;
                
                const speakNextSentence = () => {
                    if (currentSentence < sentences.length && sentences[currentSentence].trim()) {
                        const sentenceUtterance = new SpeechSynthesisUtterance(sentences[currentSentence].trim());
                        
                        if (preferredVoices.length > 0) {
                            sentenceUtterance.voice = preferredVoices[0];
                        }
                        
                        // Vary pitch slightly for musical effect
                        sentenceUtterance.rate = 0.7 + (Math.random() * 0.2 - 0.1); // 0.6-0.8
                        sentenceUtterance.pitch = 1.2 + (Math.random() * 0.4 - 0.2); // 1.0-1.6
                        sentenceUtterance.volume = 1;
                        
                        sentenceUtterance.onend = () => {
                            currentSentence++;
                            setTimeout(speakNextSentence, 300); // Pause between sentences
                        };
                        
                        sentenceUtterance.onerror = () => setIsPlaying(false);
                        
                        speechSynthesis.speak(sentenceUtterance);
                    } else {
                        setIsPlaying(false);
                    }
                };
                
                utterance.onstart = () => setIsPlaying(true);
                utterance.onend = () => setIsPlaying(false);
                utterance.onerror = () => setIsPlaying(false);
                
                // Use the segmented approach for better sing-song effect
                setIsPlaying(true);
                speakNextSentence();
            };

            const currentState = showRhyme ? 'rhyme' : 'building';

            return (
                <div className="min-h-screen galaxy-bg p-2 sm:p-4">
                    <div className="max-w-6xl mx-auto relative z-10">
                        <header className="text-center mb-4 sm:mb-6">
                            <h1 className="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-2 drop-shadow-lg animate-fade-in animate-float">
                                🌟 Magic Rhyme Builder ✨
                            </h1>
                            <p className="text-base sm:text-lg text-purple-200 drop-shadow animate-fade-in">
                                Create magical rhymes among the stars! 🌌
                            </p>
                        </header>

                        {currentState === 'building' && (
                            <div className="space-y-4 sm:space-y-6">
                                {/* Emoji Library */}
                                <div className="bg-gradient-to-br from-indigo-900/80 to-purple-900/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 shadow-2xl animate-fade-in border border-purple-500/30">
                                    <h2 className="text-xl sm:text-2xl font-bold text-white mb-3 sm:mb-4 text-center">
                                        🎭 Choose Your Story Elements
                                    </h2>
                                    
                                    {/* Category Selector */}
                                    <div className="flex flex-wrap justify-center gap-2 mb-4 sm:mb-6">
                                        {categories.map((category) => (
                                            <button
                                                key={category.id}
                                                onClick={() => setActiveCategory(category.id)}
                                                className={`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-full text-sm sm:text-base font-medium transition-all duration-200 ${
                                                    activeCategory === category.id
                                                        ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg scale-105 border border-purple-300'
                                                        : 'bg-slate-800/50 text-purple-200 hover:bg-slate-700/70 border border-purple-500/30'
                                                }`}
                                            >
                                                <span className="text-lg">{category.icon}</span>
                                                <span className="hidden sm:inline">{category.name}</span>
                                            </button>
                                        ))}
                                    </div>

                                    {/* Emoji Grid */}
                                    <div className="grid grid-cols-5 sm:grid-cols-8 lg:grid-cols-10 gap-2 sm:gap-3">
                                        {emojiLibrary[activeCategory].map((emoji, index) => (
                                            <div
                                                key={index}
                                                draggable
                                                onDragStart={(e) => handleDragStart(e, emoji)}
                                                className="text-2xl sm:text-3xl lg:text-4xl p-2 sm:p-3 bg-gradient-to-br from-purple-200/20 to-pink-200/20 rounded-xl cursor-grab active:cursor-grabbing hover:scale-110 transition-transform duration-200 text-center shadow-sm hover:shadow-md backdrop-blur-sm border border-purple-400/30 hover:border-purple-300/50"
                                            >
                                                {emoji}
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Magic Story Book */}
                                <div className="bg-gradient-to-br from-purple-900/80 to-indigo-900/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 shadow-2xl animate-fade-in border border-purple-500/30">
                                    <h2 className="text-xl sm:text-2xl font-bold text-white mb-3 sm:mb-4 text-center">
                                        📖 Magic Story Book
                                    </h2>
                                    
                                    <div className="flex flex-col items-center">
                                        {/* Magic Book */}
                                        <div
                                            onDrop={handleDrop}
                                            onDragOver={handleDragOver}
                                            className={`relative w-64 sm:w-80 h-40 sm:h-48 rounded-lg shadow-2xl flex items-center justify-center transition-all duration-300 ${
                                                isAnimating ? 'animate-pulse scale-105' : ''
                                            }`}
                                            style={{
                                                background: isAnimating 
                                                    ? 'linear-gradient(45deg, #a855f7, #9333ea, #7c3aed, #5b21b6)' 
                                                    : 'linear-gradient(45deg, #5b21b6, #7c3aed, #9333ea, #a855f7)',
                                                boxShadow: isAnimating 
                                                    ? '0 0 40px rgba(168, 85, 247, 0.6), inset 0 0 20px rgba(147, 51, 234, 0.3)' 
                                                    : '0 20px 40px rgba(0,0,0,0.4), inset 0 0 20px rgba(0,0,0,0.2)',
                                                border: '4px solid #581c87',
                                                borderRadius: '8px',
                                                position: 'relative'
                                            }}
                                        >
                                            {/* Book spine */}
                                            <div className="absolute left-0 top-0 bottom-0 w-4 bg-gradient-to-b from-purple-800 to-purple-900 rounded-l-lg border-r-2 border-purple-700"></div>
                                            
                                            {/* Book pages effect */}
                                            <div className="absolute right-1 top-1 bottom-1 w-1 bg-white/80 rounded-r-sm"></div>
                                            <div className="absolute right-2 top-2 bottom-2 w-1 bg-white/60 rounded-r-sm"></div>
                                            <div className="absolute right-3 top-3 bottom-3 w-1 bg-white/40 rounded-r-sm"></div>

                                            {/* Content area */}
                                            <div className="flex flex-wrap gap-2 justify-center items-center p-6 ml-4">
                                                {isAnimating ? (
                                                    <div className="text-center">
                                                        <div className="text-2xl sm:text-3xl mb-2 animate-float">📝</div>
                                                        <div className="text-lg sm:text-xl animate-bounce">
                                                            {'✨💫⭐'.split('').map((star, i) => (
                                                                <span key={i} className="inline-block animate-twinkle" style={{animationDelay: `${i * 0.3}s`}}>
                                                                    {star}
                                                                </span>
                                                            ))}
                                                        </div>
                                                        <div className="text-xs sm:text-sm text-purple-100 mt-1">Writing your story...</div>
                                                    </div>
                                                ) : selectedEmojis.length === 0 ? (
                                                    <div className="text-purple-100 text-center">
                                                        <div className="text-2xl sm:text-3xl mb-2">📝</div>
                                                        <div className="text-xs sm:text-sm">Drop story elements here!</div>
                                                    </div>
                                                ) : (
                                                    selectedEmojis.map((emoji, index) => (
                                                        <div
                                                            key={index}
                                                            onClick={() => removeEmoji(index)}
                                                            className="text-2xl sm:text-3xl cursor-pointer hover:scale-110 transition-transform bg-purple-100/20 rounded-full p-1 sm:p-2 backdrop-blur-sm border border-purple-300/50"
                                                        >
                                                            {emoji}
                                                        </div>
                                                    ))
                                                )}
                                            </div>
                                        </div>

                                        {/* Action Buttons */}
                                        <div className="flex gap-3 mt-6">
                                            <button
                                                onClick={handleGenerateRhyme}
                                                disabled={selectedEmojis.length === 0 || isGeneratingRhyme}
                                                className={`px-6 sm:px-8 py-3 sm:py-4 rounded-full text-base sm:text-lg font-bold text-white transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 border border-purple-400/50`}
                                            >
                                                {isGeneratingRhyme ? (
                                                    <span className="flex items-center gap-2">
                                                        <Loader className="text-xl" />
                                                        <span className="hidden sm:inline">Creating magic...</span>
                                                    </span>
                                                ) : (
                                                    <span className="flex items-center gap-2">
                                                        <Sparkles className="text-xl" />
                                                        Create Rhyme!
                                                    </span>
                                                )}
                                            </button>
                                            
                                            {selectedEmojis.length > 0 && (
                                                <button
                                                    onClick={clearAll}
                                                    className="px-4 sm:px-6 py-3 sm:py-4 rounded-full text-base sm:text-lg font-bold text-purple-200 bg-slate-700/70 hover:bg-slate-600/80 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 border border-slate-500/50"
                                                >
                                                    <RotateCcw className="text-xl" />
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {currentState === 'rhyme' && currentRhyme && (
                            <div className="space-y-4 sm:space-y-6">
                                {/* Generated Rhyme */}
                                <div className="bg-gradient-to-br from-indigo-900/90 to-purple-900/90 backdrop-blur-sm rounded-2xl p-6 sm:p-8 shadow-2xl animate-fade-in border border-purple-400/50">
                                    <div className="text-center mb-4 sm:mb-6">
                                        <h2 className="text-2xl sm:text-3xl font-bold text-white mb-2">
                                            🎵 Your Magical Rhyme! ✨
                                        </h2>
                                    </div>
                                    
                                    <div className="text-center mb-4 sm:mb-6">
                                        <div className="flex justify-center gap-2 mb-4">
                                            {selectedEmojis.map((emoji, index) => (
                                                <span key={index} className="text-3xl sm:text-4xl animate-float" style={{animationDelay: `${index * 0.2}s`}}>
                                                    {emoji}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    <div className="text-center">
                                        <div className="text-lg sm:text-xl lg:text-2xl leading-relaxed sm:leading-loose text-purple-100 mb-6 sm:mb-8 whitespace-pre-line font-medium">
                                            {currentRhyme}
                                        </div>
                                        
                                        <div className="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center">
                                            <button
                                                onClick={playAudio}
                                                disabled={!speechSynthesis}
                                                className="px-6 sm:px-8 py-3 sm:py-4 rounded-full text-base sm:text-lg font-bold text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100 border border-emerald-400/50"
                                            >
                                                <span className="flex items-center gap-2 justify-center">
                                                    {isPlaying ? <VolumeX className="text-xl" /> : <Volume2 className="text-xl" />}
                                                    {isPlaying ? 'Stop Singing' : 'Sing My Rhyme!'}
                                                </span>
                                            </button>
                                            
                                            <button
                                                onClick={clearAll}
                                                className="px-6 sm:px-8 py-3 sm:py-4 rounded-full text-base sm:text-lg font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 border border-purple-400/50"
                                            >
                                                <span className="flex items-center gap-2 justify-center">
                                                    <RotateCcw className="text-xl" />
                                                    Create New Rhyme
                                                </span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Render the app
        const domContainer = document.querySelector('#root');
        const root = ReactDOM.createRoot(domContainer);
        root.render(<RhymeBuilder />);
    </script>
</body>
</html> 